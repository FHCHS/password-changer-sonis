<?php
// $Id$

/**
* @file
* Install password changer SONIS.
*/

/**
* Implements hook_install()
*/
function password_changer_sonis_install() {
  
  //Register new sub module
  $system = array( '#module_name' => 'password_changer_sonis',
                   '#title'       => 'SONISWEB System',
                   '#description' => 'Change SONISWEB password.',
                   '#optional_link' => '',
                   '#must_change' => FALSE, );
  
  $complexity = array( 'max_length' => array( 'value' => 8,
                                               'error_message' => 'The password maximum length is eight character long.'),
                        'min_length' => array( 'value' => 6,
                                               'error_message' => 'The password needs to be at least six character long.'),
                        'digit' => array('value' => 0,
                                        'error_message' => ''),
                        'symbols' => array('value' => -1,
                                           'error_message' => ''));
            
  
  //Register module
  password_changer_api_register_submodule($system, $complexity);
  
  
}

/**
* Implements hook_unistall()
*/
function password_changer_sonis_uninstall() {
 
 //if required module is disable it won't find the function
 //unregister_passwordchanger_submodule.
 
 if ( function_exists('password_changer_api_unregister_submodule') ) {
  password_changer_api_unregister_submodule('password_changer_sonis');
 }//Handeling that the password changer API module is install
 else { 
  watchdog('[password_changer_sonis][_uninstall]', 'Unable to un-install module SONIS. The required module
                                     (Password Changer API) might be disable or uninstall.', WATCHDOG_ERROR);
  throw new Exception('Unable to un-install module SONIS. The required module
                      (Password Changer API) might be disable or uninstall.');
 } 
}